<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录</title>
    <script src="./js//jquery-3.4.1.min.js"></script>
    <script src="./js/mock-min.js"></script>
    <script src="./js/myServer.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/layui/layui.js"></script>
    <link rel="stylesheet" href="./js/layui/css/layui.css">

</head>
<style>
    .form-login {
        margin: 200px;
    }
</style>

<body>
    <div class="layui-row form-login ">
        <div class="layui-col-md6 layui-col-md-offset3  layui-show-md ">
            <form class="layui-form" action="">
                <div class="layui-form-item">
                    <h1>注册</h1>
                    <hr>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">帐号注册</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required lay-verify="required" placeholder="请输入标题"
                            autocomplete="off" class="layui-input" id="user">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">密码注册</label>
                    <div class="layui-input-block">
                        <input type="password" name="password" required lay-verify="required" placeholder="请输入密码"
                            autocomplete="off" class="layui-input" id="password">
                    </div>
                    <!-- <div class="layui-form-mid layui-word-aux">辅助文字</div> -->
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn login-btn" lay-submit lay-filter="formDemo">立即提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        <a href="login.html" class="layui-btn layui-btn-primary">登录</a>
                    </div>
                </div>
            </form>
        </div>
    </div>





    <script>
        //Demo
        layui.use('form', function () {
            var form = layui.form;

            //监听提交
            form.on('submit(formDemo)', function (data) {
                // layer.msg(JSON.stringify(data.field));
                return false;
            });
        });
        $('.login-btn').click(function() {
            // console.log("asd");
            
            if($('#user').val()&&$('#password').val()){

                $.ajax({
                    url: '/users/register',
                    type: 'post',
                    data: {
                        username: $('#user').val(),
                        password: $('#password').val(),
                    },
                    dataType: 'json',
                    success(msg) {
                        if(msg) {
                            alert('注册成功');
                            window.location.href="login.html"
                        } else {
                            alert('注册失败！请重新填写帐号和密码');
                        }
                    }
                })
                // $.ajax({
                //     type: "method",
                //     url: "url",
                //     data: "data",
                //     dataType: "dataType",
                //     success: function (response) {
                        
                //     }
                // });
            }
            return;
        });
    </script>
</body>

</html>