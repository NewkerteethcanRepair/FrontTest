# **react**

Facebook 内部项目 2013年开源

**其实是一个js库， 全家桶是框架**

用于构建用户界面的JS库

**核心概念: 单向数据流**" ：**MVC**

**virtual DOM(虚拟节点) ：本质上就是一个对象**

**Diff 算法**：

**环境搭建:** React脚手架工具  create-react-app（CRA）

**JSX** :是Javascript 语法扩展，是JavaScript与XML的结合

**JSX的使用** :JSX中使用JS {}

​					 :设置元素属性 className  htmlFFor



React 全家桶：React React Router Redux  

#### **创建react**

npx create-react-app my-app

或者

npm i create-react-app -g

create-react-app my-app

#### **启动React应用**

进入项目跟目录

然后npm start

#### React**语法**

#### **组件**

###### 函数组件 （无状态）（无生命周期）

###### 类组件

#### **Props**

在组件内部，通过props接收外部传给组件的值 (只读) 

Props：对外接口 用于接收外部传递的数据

​			   只读（不可修改）

#### 事件处理

#### **state**

**用于定义组件内部的数据**

函数组件没有state， 被称为 无状态组件

修改state 里面的值 方法 this.setState({

});

**修改引用类型给一个新地址**

****



#### **form**

form组件分为受控组件，非受控组件

###### 非受控组件

输入框没有value 属性（单选 复选没有， checked属性）

输入框值改变（单选框复选框 中状态改变），不会修改state

state 修改也不会影响输入框的值

###### 受控组件

可以实现vue 的双向绑定

#### **生命周期**

函数组件没有生命周期

类组件有

componentDidMount() 用于发送请求



pureComponent 代替 component 可以 防止 this.setState 每次更改就更新，只有值真正变了才触发rander 更新

不常用方法

static getDerivedStateFromProps(props,state){

​	return {a:1}

}

#### hook

#### router

下载

npm i react-router-dom

###### 配置

配置完成后，需要路由对应的组件在什么地方显示

###### 跳转

Link

NavLink

props.history.push()

###### 嵌套路由 

在一级路由

exact 精确匹配

###### 路由传参

传递参数



接收参数



![image-20200326140456516](C:\Users\newteethqaq\AppData\Roaming\Typora\typora-user-images\image-20200326140456516.png)

#### Redux

npm i redux

##### 配置 

##### 数据初始化:

1. 创建一个存储数据的仓库

   import {createStore} from "redex";

   const store =createStore();

2. 设置初始数据

   Redux 中的 state 统一交给 reducer 处理

3. 将数据添加到仓库

##### 将store 应用 放到整个 react 项目中

npm i  react-redux

##### 连接store与组件

##### 组件访问仓库

#### Redux-actions

npm i redux-actions



1 state 在store内

2通过reducer 修改state （reducer函数的返回值会覆盖掉store中的旧数据）

3 通过 dispatch 触发 reducer 的执行。

 	1调用 dispatch 时传递一个action 对象 ：{type:”任务1}

拆分

​	1 reducer.js :所有任务对应的操作

​    2   actions.js :{type:”任务2} {type:”任务1} {type:”任务3}   相当于任务书

​    3 actions-type.js ：任务1 任务2 人物3      相当于 任务代号



##### 用redux 做todolist

1 现在store 里面 todolist文件夹里面建一个 reducers.js

2然后在 reducers.js  import {handleActions} from "redux-actions";

const inintList =[

​	todolist 的数据 比如

{

id:0,text:HTMl, done;flase

}

]

3 使用 hangleActions   暴露

export const xxx 

4 仓库 store.js 引入 

import listData from "./todolist/reducers.js"

5 在组件里渲染数据

使用conncet

import {connect} redux-actions;



两次调用

暴露 connect(

(state)=>{

return {listData:state.listData}



}

)(你的组件eg list)

在组件内  渲染

6 在 todolist 建 actions 和 actions-type

actions 里

import {createAction} from “redux-actions”；

在 reducers

import {Add-todo} form "actions-type" //任务书



然后暴露 addtodo

##### **中间件**

其实就是一个插件

第一个  **redux-logger** 可以帮我们把console 日子的方式做了 （通过dispatch）

###### redux-logger

在store里面

import logger from “redux-looger”

方法 applyMiddleware  

引入 

###### **redux-thunk**

默认情况下 dispath 方法接收的是一个action对象 例如:

dispath({type:"increment'})

使用 redux-thunk后 dispatch 除了 可以接收一个对象作为参数以外，还可以 接收一个函数作为参数

dispatch(function(dispatch,getState)){

​	//异步操作

}

export defalut store

#### fetch

新的请求 

es6新增的

fetch("/students?currentPage=1&pageSize=3")